<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.ferreteria.infrastructure.ui.UsersController"
            styleClass="dashboard-root">

    <!-- Navbar Superior -->
    <top>
        <HBox styleClass="navbar" alignment="CENTER_LEFT" spacing="12">
            <padding>
                <Insets top="0" right="32" bottom="0" left="32"/>
            </padding>

            <!-- Logo y Marca -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="ðŸ”§" styleClass="navbar-icon"/>
                <Label text="Ferreteria" styleClass="navbar-brand"/>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Menu de Navegacion -->
            <HBox alignment="CENTER" spacing="6">
                <Button text="Dashboard" onAction="#handleDashboard" styleClass="nav-button"/>
                <Button text="Productos" onAction="#handleProducts" styleClass="nav-button"/>
                <Button text="Ventas" onAction="#handleSales" styleClass="nav-button"/>
                <Button text="Reportes" onAction="#handleReports" styleClass="nav-button"/>
                <Button text="Usuarios" styleClass="nav-button nav-button-active"/>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Usuario y Logout -->
            <HBox alignment="CENTER_RIGHT" spacing="20">
                <VBox alignment="CENTER_RIGHT">
                    <Label fx:id="welcomeLabel" text="Administrador" styleClass="nav-user-name"/>
                    <Label fx:id="roleLabel" text="Admin" styleClass="nav-user-role"/>
                </VBox>
                <Button text="Cerrar Sesion" onAction="#handleLogout" styleClass="logout-btn, danger"/>
            </HBox>
        </HBox>
    </top>

    <!-- Contenido Principal -->
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="scroll-pane">
            <VBox styleClass="main-content" spacing="28">
                <padding>
                    <Insets top="32" right="40" bottom="32" left="40"/>
                </padding>

                <!-- Header de Pagina -->
                <HBox alignment="CENTER_LEFT" spacing="20">
                    <VBox HBox.hgrow="ALWAYS" spacing="6">
                        <Label text="GestiÃ³n de Usuarios" styleClass="page-title"/>
                        <Label text="Administra los usuarios del sistema y sus permisos" styleClass="page-subtitle"/>
                    </VBox>
                    <Button text="+ Nuevo Usuario" onAction="#handleNewUser" styleClass="action-button, success"/>
                </HBox>

                <!-- EstadÃ­sticas RÃ¡pidas -->
                <HBox spacing="24" alignment="CENTER">
                    <!-- Card Total Usuarios -->
                    <VBox styleClass="stat-card card-blue" HBox.hgrow="ALWAYS">
                        <Label text="ðŸ‘¥" styleClass="card-icon"/>
                        <Label fx:id="totalUsersLabel" text="0" styleClass="card-value"/>
                        <Label text="Total Usuarios" styleClass="card-label"/>
                    </VBox>

                    <!-- Card Usuarios Activos -->
                    <VBox styleClass="stat-card card-green" HBox.hgrow="ALWAYS">
                        <Label text="âœ…" styleClass="card-icon"/>
                        <Label fx:id="activeUsersLabel" text="0" styleClass="card-value"/>
                        <Label text="Usuarios Activos" styleClass="card-label"/>
                    </VBox>
                </HBox>

                <!-- Tabla de Usuarios -->
                <VBox spacing="16">
                    <Label text="Lista de Usuarios" styleClass="section-title"/>
                    
                    <TableView fx:id="usersTable" 
                               styleClass="table-view" 
                               VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="usernameColumn" text="Usuario" prefWidth="120"/>
                            <TableColumn fx:id="fullNameColumn" text="Nombre Completo" prefWidth="200"/>
                            <TableColumn fx:id="roleColumn" text="Rol" prefWidth="120"/>
                            <TableColumn fx:id="statusColumn" text="Estado" prefWidth="100"/>
                            <TableColumn fx:id="actionsColumn" text="Acciones" prefWidth="150"/>
                        </columns>
                    </TableView>
                </VBox>

                <!-- InformaciÃ³n Adicional -->
                <VBox spacing="12" styleClass="info-section">
                    <Label text="ðŸ“‹ InformaciÃ³n de Usuarios" styleClass="section-title"/>
                    <VBox spacing="8">
                        <Label text="â€¢ Solo los administradores pueden acceder a esta vista" styleClass="info-text"/>
                        <Label text="â€¢ Los usuarios pueden ser administradores o vendedores" styleClass="info-text"/>
                        <Label text="â€¢ Usa el botÃ³n ðŸ”„ para activar/desactivar usuarios" styleClass="info-text"/>
                        <Label text="â€¢ Los usuarios inactivos no pueden iniciar sesiÃ³n" styleClass="info-text"/>
                    </VBox>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
